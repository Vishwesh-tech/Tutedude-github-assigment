<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker - Wellnest</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <style>
        :where([class^="ri-"])::before {
            content: "\f3c2";
        }

        .h{
            height: 500px;
        }

        .user-dropdown {
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.2s ease-in-out;
            z-index: 50;
        }

        .user-dropdown.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#57B5E7',
                        secondary: '#8DD3C7'
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-50 min-h-screen">
    <div class="flex">
        <aside class="w-64 bg-white shadow-sm min-h-screen fixed left-0 top-0 z-10">
            <div class="p-6">
                <div class="flex items-center gap-3 mb-8">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <i class="ri-heart-pulse-line text-white text-sm"></i>
                    </div>
                    <a href="{{ url_for('hello_world') }}">
                        <span class="font-['Pacifico'] text-xl text-gray-800">Wellnest</span>
                    </a>
                </div>
                <nav class="space-y-2">
                    <a href="{{ url_for('dashboard') }}"
                        class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <div class="w-5 h-5 flex items-center justify-center">
                            <i class="ri-dashboard-line text-lg"></i>
                        </div>
                        <span>Dashboard</span>
                    </a>
                    <a href="{{ url_for('habits') }}"
                        class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <div class="w-5 h-5 flex items-center justify-center">
                            <i class="ri-calendar-check-line text-lg"></i>
                        </div>
                        <span>Habits</span>
                    </a>
                    <a href="{{ url_for('moodtracker') }}"
                        class="flex items-center gap-3 px-4 py-3 text-primary bg-primary/10 rounded-lg">
                        <div class="w-5 h-5 flex items-center justify-center">
                            <i class="ri-emotion-line text-lg"></i>
                        </div>
                        <span class="font-medium">Mood Tracker</span>
                    </a>
                    <a href="{{ url_for('ai_coach') }}" data-readdy="true"
                        class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <div class="w-5 h-5 flex items-center justify-center">
                            <i class="ri-robot-line text-lg"></i>
                        </div>
                        <span>AI Coach</span>
                    </a>
                    <a href="{{ url_for('achievement') }}" data-readdy="true"
                        class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <div class="w-5 h-5 flex items-center justify-center">
                            <i class="ri-trophy-line text-lg"></i>
                        </div>
                        <span>Achievements</span>
                    </a>
                    <a href="{{ url_for('setting') }}"
                        class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <div class="w-5 h-5 flex items-center justify-center">
                            <i class="ri-settings-line text-lg"></i>
                        </div>
                        <span>Settings</span>
                    </a>
                </nav>
            </div>
            <div class="absolute bottom-6 left-6">
                <button class="flex items-center gap-2 text-gray-500 text-sm hover:text-gray-700 transition-colors">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <i class="ri-moon-line"></i>
                    </div>
                    <span>Dark Mode</span>
                </button>
            </div>
        </aside>
        <main class="flex-1 ml-64 p-6">
            <header class="flex items-center justify-between mb-8">
                <div>
                    <h1 class="text-2xl font-semibold text-gray-800">Mood Tracker</h1>
                    <p class="text-gray-600">Thursday, July 17, 2025</p>
                </div>
                <div class="flex items-center gap-4">
                    <div class="flex items-center space-x-4">
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-50 relative">
                            <i class="ri-notification-line text-gray-600"></i>
                            <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                        </button>
                        <div class="relative">
                            <button id="userMenuButton"
                                class="w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-semibold hover:bg-primary/90 transition-colors">
                                {{ initial }}
                            </button>
                            <!-- Dropdown Menu -->
                            <div id="userDropdown"
                                class="user-dropdown absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-100 py-1">
                                <div class="px-4 py-2 border-b border-gray-100">
                                    <p class="text-sm font-medium text-gray-900">{{ user_name }}</p>
                                    <p class="text-xs text-gray-500">{{ user_email }}</p>
                                </div>
                                <a href="{{ url_for('dashboard') }}"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="ri-dashboard-line mr-2"></i>Dashboard
                                </a>
                                <a href="{{ url_for('setting') }}"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="ri-settings-line mr-2"></i>Settings
                                </a>
                                <hr class="my-1">
                                <a href="{{ url_for('logout') }}"
                                    class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors">
                                    <i class="ri-logout-box-line mr-2"></i>Sign Out
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <div class="bg-white rounded-2xl shadow-sm p-8 mb-6">
                <div class="text-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">How are you feeling today?</h2>
                    <p class="text-gray-600">Select your current mood</p>
                </div>
                <div class="flex justify-center gap-6 mb-8">
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="ecstatic" data-emoji="😄">
                        <div class="text-5xl">😄</div>
                        <span class="text-sm font-medium text-gray-700">Ecstatic</span>
                    </button>
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="happy" data-emoji="😊">
                        <div class="text-5xl">😊</div>
                        <span class="text-sm font-medium text-gray-700">Happy</span>
                    </button>
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="content" data-emoji="🙂">
                        <div class="text-5xl">🙂</div>
                        <span class="text-sm font-medium text-gray-700">Content</span>
                    </button>
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="neutral" data-emoji="😐">
                        <div class="text-5xl">😐</div>
                        <span class="text-sm font-medium text-gray-700">Neutral</span>
                    </button>
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="sad" data-emoji="😢">
                        <div class="text-5xl">😢</div>
                        <span class="text-sm font-medium text-gray-700">Sad</span>
                    </button>
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="angry" data-emoji="😡">
                        <div class="text-5xl">😡</div>
                        <span class="text-sm font-medium text-gray-700">Angry</span>
                    </button>
                    <button
                        class="mood-selector flex flex-col items-center gap-2 p-4 rounded-2xl hover:bg-gray-50 transition-all duration-200 transform hover:scale-105"
                        data-mood="anxious" data-emoji="😰">
                        <div class="text-5xl">😰</div>
                        <span class="text-sm font-medium text-gray-700">Anxious</span>
                    </button>
                </div>
                <div class="max-w-2xl mx-auto">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Add a note (optional)</label>
                    <textarea id="mood-note" placeholder="What's on your mind? Share your thoughts about today..."
                        class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary resize-none text-sm"
                        rows="3"></textarea>
                    <button id="save-mood"
                        class="mt-4 px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors whitespace-nowrap !rounded-button">
                        Save Mood Entry
                    </button>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-sm p-6 h">
                        <br><br>
                        <div class="flex items-center justify-between mb-6" style="border-top: 2px solid rgb(67, 66, 66);">
                            <h3 class="text-lg font-semibold text-gray-800">Mood Calendar</h3>
                            <div class="flex items-center gap-2">
                                <button id="prev-month"
                                    class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-lg transition-colors">
                                    <i class="ri-arrow-left-line text-gray-600"></i>
                                </button>
                                <span id="current-month"
                                    class="text-sm font-medium text-gray-700 min-w-24 text-center">July 2025</span>
                                <button id="next-month"
                                    class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-lg transition-colors">
                                    <i class="ri-arrow-right-line text-gray-600"></i>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-7 gap-1 mb-2">
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Sun</div>
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Mon</div>
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Tue</div>
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Wed</div>
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Thu</div>
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Fri</div>
                            <div class="text-xs font-medium text-gray-500 text-center py-2">Sat</div>
                        </div>
                        <div id="calendar-grid" class="grid grid-cols-7 gap-1" style="border-bottom: 2px solid rgb(67, 66, 66);">
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-2xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-6">AI Mood Insights</h3>
                    <div class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="ri-brain-line text-blue-600 text-sm"></i>
                                </div>
                                <span class="font-medium text-gray-800">Pattern Analysis</span>
                            </div>
                            <p class="text-sm text-gray-600">Your mood tends to improve in the afternoon. Consider
                                scheduling important tasks after 2 PM.</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="ri-lightbulb-line text-green-600 text-sm"></i>
                                </div>
                                <span class="font-medium text-gray-800">Recommendation</span>
                            </div>
                            <p class="text-sm text-gray-600">Try a 10-minute morning meditation. Users with similar
                                patterns report 23% mood improvement.</p>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="ri-trophy-line text-purple-600 text-sm"></i>
                                </div>
                                <span class="font-medium text-gray-800">Achievement</span>
                            </div>
                            <p class="text-sm text-gray-600">5-day positive mood streak! You're building great emotional
                                resilience.</p>
                        </div>
                        <a href="https://readdy.ai/home/a72fa616-b685-40a5-b3c1-080b7f25f8f8/8c753a3d-fafe-4221-b899-23f6db758ab0"
                            data-readdy="true" class="block w-full">
                            <button
                                class="w-full px-4 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors whitespace-nowrap !rounded-button">
                                Chat with AI Coach
                            </button>
                        </a>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white rounded-2xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-6">Mood Trends</h3>
                    <div id="mood-chart" class="h-64"></div>
                </div>
                <div class="bg-white rounded-2xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-6">Weekly Summary</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">😊</div>
                                <div>
                                    <p class="font-medium text-gray-800">Most Frequent Mood</p>
                                    <p class="text-sm text-gray-600">Happy (4 days this week)</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="ri-arrow-up-line text-green-600 text-sm"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Mood Improvement</p>
                                    <p class="text-sm text-gray-600">+15% from last week</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="ri-calendar-check-line text-blue-600 text-sm"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Tracking Streak</p>
                                    <p class="text-sm text-gray-600">12 consecutive days</p>
                                </div>
                            </div>
                        </div>
                        <div id="mood-distribution" class="h-32 mt-6"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script id="mood-selector">
        document.addEventListener('DOMContentLoaded', function () {
            const moodButtons = document.querySelectorAll('.mood-selector');
            const saveMoodBtn = document.getElementById('save-mood');
            const moodNote = document.getElementById('mood-note');
            let selectedMood = null;
            moodButtons.forEach(button => {
                button.addEventListener('click', function () {
                    moodButtons.forEach(btn => {
                        btn.classList.remove('bg-primary/10', 'border-2', 'border-primary');
                    });
                    this.classList.add('bg-primary/10', 'border-2', 'border-primary');
                    selectedMood = {
                        mood: this.dataset.mood,
                        emoji: this.dataset.emoji
                    };
                });
            });
            saveMoodBtn.addEventListener('click', function () {
                if (selectedMood) {
                    const today = new Date();
                    const moodData = {
                        date: today.toISOString().split('T')[0],
                        mood: selectedMood.mood,
                        emoji: selectedMood.emoji,
                        note: moodNote.value,
                        timestamp: today.getTime()
                    };
                    let savedMoods = JSON.parse(localStorage.getItem('moodData') || '[]');
                    const existingIndex = savedMoods.findIndex(m => m.date === moodData.date);
                    if (existingIndex >= 0) {
                        savedMoods[existingIndex] = moodData;
                    } else {
                        savedMoods.push(moodData);
                    }
                    localStorage.setItem('moodData', JSON.stringify(savedMoods));
                    this.textContent = 'Saved!';
                    this.classList.add('bg-green-500');
                    this.classList.remove('bg-primary');
                    setTimeout(() => {
                        this.textContent = 'Save Mood Entry';
                        this.classList.remove('bg-green-500');
                        this.classList.add('bg-primary');
                        moodButtons.forEach(btn => {
                            btn.classList.remove('bg-primary/10', 'border-2', 'border-primary');
                        });
                        moodNote.value = '';
                        selectedMood = null;
                        generateCalendar();
                        updateCharts();
                    }, 2000);
                }
            });
        });
    </script>
    <script id="calendar-functionality">
        document.addEventListener('DOMContentLoaded', function () {
            let currentDate = new Date();
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];
            const moodColors = {
                'ecstatic': 'bg-yellow-200',
                'happy': 'bg-green-200',
                'content': 'bg-blue-200',
                'neutral': 'bg-gray-200',
                'sad': 'bg-purple-200',
                'angry': 'bg-red-200',
                'anxious': 'bg-orange-200'
            };
            function generateCalendar() {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                document.getElementById('current-month').textContent = `${monthNames[month]} ${year}`;
                const calendarGrid = document.getElementById('calendar-grid');
                calendarGrid.innerHTML = '';
                const savedMoods = JSON.parse(localStorage.getItem('moodData') || '[]');
                const moodMap = {};
                savedMoods.forEach(mood => {
                    moodMap[mood.date] = mood;
                });
                for (let i = 0; i < firstDay; i++) {
                    const emptyCell = document.createElement('div');
                    emptyCell.className = 'h-10';
                    calendarGrid.appendChild(emptyCell);
                }
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const dayCell = document.createElement('div');
                    dayCell.className = 'h-10 flex items-center justify-center text-sm cursor-pointer rounded-lg hover:bg-gray-100 transition-colors relative';
                    if (moodMap[dateStr]) {
                        dayCell.classList.add(moodColors[moodMap[dateStr].mood]);
                        dayCell.innerHTML = `
<span class="text-xs absolute top-0.5 left-0.5">${moodMap[dateStr].emoji}</span>
<span class="font-medium">${day}</span>
`;
                    } else {
                        dayCell.innerHTML = `<span>${day}</span>`;
                    }
                    const today = new Date();
                    if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                        dayCell.classList.add('ring-2', 'ring-primary');
                    }
                    calendarGrid.appendChild(dayCell);
                }
            }
            document.getElementById('prev-month').addEventListener('click', function () {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar();
            });
            document.getElementById('next-month').addEventListener('click', function () {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar();
            });
            generateCalendar();
            window.generateCalendar = generateCalendar;
        });
    </script>
    <script id="mood-charts">
        document.addEventListener('DOMContentLoaded', function () {
            function updateCharts() {
                const savedMoods = JSON.parse(localStorage.getItem('moodData') || '[]');
                const moodChart = echarts.init(document.getElementById('mood-chart'));
                const distributionChart = echarts.init(document.getElementById('mood-distribution'));
                const last7Days = [];
                const today = new Date();
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    last7Days.push(date.toISOString().split('T')[0]);
                }
                const moodValues = {
                    'ecstatic': 5,
                    'happy': 4,
                    'content': 3,
                    'neutral': 2,
                    'sad': 1,
                    'angry': 0,
                    'anxious': 0
                };
                const chartData = last7Days.map(date => {
                    const mood = savedMoods.find(m => m.date === date);
                    return mood ? moodValues[mood.mood] : null;
                });
                const moodOption = {
                    animation: false,
                    grid: { top: 20, right: 20, bottom: 40, left: 40 },
                    xAxis: {
                        type: 'category',
                        data: last7Days.map(date => new Date(date).toLocaleDateString('en', { weekday: 'short' })),
                        axisLine: { lineStyle: { color: '#e5e7eb' } },
                        axisTick: { show: false },
                        axisLabel: { color: '#6b7280', fontSize: 12 }
                    },
                    yAxis: {
                        type: 'value',
                        min: 0,
                        max: 5,
                        axisLine: { show: false },
                        axisTick: { show: false },
                        axisLabel: { color: '#6b7280', fontSize: 12 },
                        splitLine: { lineStyle: { color: '#f3f4f6' } }
                    },
                    series: [{
                        data: chartData,
                        type: 'line',
                        smooth: true,
                        symbol: 'none',
                        lineStyle: { color: '#57B5E7', width: 3 },
                        areaStyle: {
                            color: {
                                type: 'linear',
                                x: 0, y: 0, x2: 0, y2: 1,
                                colorStops: [
                                    { offset: 0, color: 'rgba(87, 181, 231, 0.1)' },
                                    { offset: 1, color: 'rgba(87, 181, 231, 0.01)' }
                                ]
                            }
                        }
                    }],
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        borderColor: '#e5e7eb',
                        textStyle: { color: '#1f2937' }
                    }
                };
                const moodCounts = {};
                savedMoods.forEach(mood => {
                    moodCounts[mood.mood] = (moodCounts[mood.mood] || 0) + 1;
                });
                const distributionData = Object.entries(moodCounts).map(([mood, count]) => ({
                    value: count,
                    name: mood.charAt(0).toUpperCase() + mood.slice(1)
                }));
                const distributionOption = {
                    animation: false,
                    series: [{
                        type: 'pie',
                        radius: ['40%', '70%'],
                        center: ['50%', '50%'],
                        data: distributionData,
                        itemStyle: {
                            borderRadius: 4,
                            borderColor: '#fff',
                            borderWidth: 2
                        },
                        color: ['#57B5E7', '#8DD3C7', '#FBBF72', '#FC8D62'],
                        label: { show: false },
                        emphasis: {
                            itemStyle: { shadowBlur: 10, shadowOffsetX: 0, shadowColor: 'rgba(0, 0, 0, 0.5)' }
                        }
                    }],
                    tooltip: {
                        trigger: 'item',
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        borderColor: '#e5e7eb',
                        textStyle: { color: '#1f2937' }
                    }
                };
                moodChart.setOption(moodOption);
                distributionChart.setOption(distributionOption);
            }
            updateCharts();
            window.updateCharts = updateCharts;
        });
    </script>
    <script id="initial-data">
        document.addEventListener('DOMContentLoaded', function () {
            const existingData = localStorage.getItem('moodData');
            if (!existingData) {
                const sampleData = [
                    { date: '2025-07-13', mood: 'happy', emoji: '😊', note: 'Great workout this morning!', timestamp: Date.now() - 4 * 24 * 60 * 60 * 1000 },
                    { date: '2025-07-14', mood: 'content', emoji: '🙂', note: 'Productive day at work', timestamp: Date.now() - 3 * 24 * 60 * 60 * 1000 },
                    { date: '2025-07-15', mood: 'happy', emoji: '😊', note: 'Spent quality time with family', timestamp: Date.now() - 2 * 24 * 60 * 60 * 1000 },
                    { date: '2025-07-16', mood: 'ecstatic', emoji: '😄', note: 'Got promoted at work!', timestamp: Date.now() - 1 * 24 * 60 * 60 * 1000 }
                ];
                localStorage.setItem('moodData', JSON.stringify(sampleData));
            }
        });
    </script>
    <script id="user-dropdown-functionality">
        document.addEventListener('DOMContentLoaded', function () {
            const userMenuButton = document.getElementById('userMenuButton');
            const userDropdown = document.getElementById('userDropdown');

            if (userMenuButton && userDropdown) {
                userMenuButton.addEventListener('click', function (e) {
                    e.stopPropagation();
                    userDropdown.classList.toggle('show');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function (e) {
                    if (!userMenuButton.contains(e.target) && !userDropdown.contains(e.target)) {
                        userDropdown.classList.remove('show');
                    }
                });

                // Close dropdown when pressing Escape
                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Escape') {
                        userDropdown.classList.remove('show');
                    }
                });
            }
        });
    </script>
</body>

</html>